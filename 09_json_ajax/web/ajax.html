<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Ajax</title>
    <script type="text/javascript">
        // 访问服务器 AjaxServlet 中 javaScriptAjax
        function ajaxRequest(){
            // 1. 创建 XMLHttpRequest
            var xmlHttpRequest = new XMLHttpRequest();
            // 2. 调用 open 方法设置请求参数
            xmlHttpRequest.open("GET", "http://localhost:8080/09_json_ajax/ajaxServlet?action=javaScriptAjax", true);
            // 3. 在 send 方法前绑定 onreadystatechange 事件，处理请求完成后的操作
            xmlHttpRequest.onreadystatechange = function () {
                if (xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
                    console.log("收到服务器返回的数据 " + xmlHttpRequest.responseText);
                    var jsonObj = JSON.parse(xmlHttpRequest.responseText);
                    document.getElementById("div01").innerHTML = "编号：" + jsonObj.id + ", 姓名：" + jsonObj.name;
                }
            }
            //4. 调用 send 方法发送请求
            xmlHttpRequest.send();
        }
    </script>
</head>
<body>
    <button onclick="ajaxRequest()">AJAX Request</button>
    <div id="div01">
    </div>
</body>
</html>